<div class="video-studio-workspace">
  <!-- Top Navigation Bar -->
  <header class="studio-header">
    <div class="header-left">
      <div class="logo-section">
        <div class="studio-logo">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
            <path d="M8,5.14V19.14L19,12.14L8,5.14Z"/>
          </svg>
          <span class="logo-text">Studio Pro</span>
        </div>
      </div>
      
      <div class="project-controls">
        <button class="project-btn" (click)="toggleProjectDropdown()">
          <span>{{ currentProjectName }}</span>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M7,10L12,15L17,10H7Z"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="header-center">
      <div class="playback-controls">
        <button class="control-btn" (click)="skipBackward()" title="Skip backward 10s">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M11.5,12L20,18V6M11,18V6L2.5,12L11,18Z"/>
          </svg>
        </button>
        
        <button class="play-pause-btn" (click)="togglePlayPause()" [class.playing]="isPlaying">
          <svg *ngIf="!isPlaying" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M8,5.14V19.14L19,12.14L8,5.14Z"/>
          </svg>
          <svg *ngIf="isPlaying" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M14,19H18V5H14M6,19H10V5H6V19Z"/>
          </svg>
        </button>
        
        <button class="control-btn" (click)="skipForward()" title="Skip forward 10s">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M13,6V18L21.5,12M4,18L12.5,12L4,6V18Z"/>
          </svg>
        </button>
      </div>

      <div class="time-display">
        <span class="current-time">{{ formatTime(currentTime) }}</span>
        <span class="separator">/</span>
        <span class="total-time">{{ formatTime(totalDuration) }}</span>
      </div>

      <div class="zoom-controls">
        <button class="zoom-btn" (click)="zoomOut()" title="Zoom out">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19,13H5V11H19V13Z"/>
          </svg>
        </button>
        <span class="zoom-level">{{ zoomLevel }}%</span>
        <button class="zoom-btn" (click)="zoomIn()" title="Zoom in">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="header-right">
      <div class="user-controls">
        <button class="lang-btn" (click)="toggleLanguage()">
          {{ currentLanguage }}
        </button>
        
        <div class="user-avatar">
          <img src="https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=40&h=40&dpr=1" alt="User" />
        </div>
      </div>

      <button class="export-btn" (click)="openExportModal()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
        </svg>
        <span>EXPORT</span>
      </button>
    </div>
  </header>

  <!-- Main Content Area -->
  <div class="studio-main">
    <!-- Left Sidebar -->
    <aside class="left-sidebar" [class.collapsed]="sidebarCollapsed">
      <div class="sidebar-header">
        <button class="collapse-btn" (click)="toggleSidebar()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"/>
          </svg>
        </button>
        
        <div class="search-bar" *ngIf="!sidebarCollapsed">
          <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
          </svg>
          <input 
            type="text" 
            placeholder="Search assets..." 
            [(ngModel)]="searchQuery"
            (input)="onSearchChange()"
            class="search-input"
          />
        </div>
      </div>

      <nav class="sidebar-nav" *ngIf="!sidebarCollapsed">
        <button 
          class="nav-tab" 
          *ngFor="let tab of navTabs" 
          [class.active]="activeTab === tab.id"
          (click)="setActiveTab(tab.id)"
        >
          <div class="tab-icon" [innerHTML]="tab.icon"></div>
          <span class="tab-label">{{ tab.label }}</span>
        </button>
      </nav>

      <div class="sidebar-content" *ngIf="!sidebarCollapsed">
        <!-- Media Library -->
        <div class="content-panel" *ngIf="activeTab === 'media'">
          <div class="panel-header">
            <h3>Media Library</h3>
            <button class="import-btn" (click)="openImportDialog()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
              </svg>
              Import
            </button>
          </div>
          
          <div class="media-grid" *ngIf="filteredMedia.length > 0; else noMediaTemplate">
            <div 
              class="media-item" 
              *ngFor="let media of filteredMedia; trackBy: trackByMediaId"
              cdkDrag
              [cdkDragData]="{ type: 'media', media: media }"
              (click)="selectMedia(media)"
              [class.selected]="selectedMedia?.id === media.id"
            >
              <div class="media-thumbnail">
                <video 
                  *ngIf="media.video" 
                  [src]="media.video" 
                  preload="metadata" 
                  muted
                  (error)="onMediaThumbnailError($event, media)"
                ></video>
                <div class="media-placeholder" *ngIf="!media.video">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M8,5.14V19.14L19,12.14L8,5.14Z"/>
                  </svg>
                </div>
                <div class="media-overlay">
                  <div class="play-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M8,5.14V19.14L19,12.14L8,5.14Z"/>
                    </svg>
                  </div>
                </div>
              </div>
              <div class="media-info">
                <span class="media-title">{{ media.title }}</span>
                <div class="media-meta">
                  <span class="duration">{{ formatTime(media.duration || 30) }}</span>
                </div>
              </div>
            </div>
          </div>

          <ng-template #noMediaTemplate>
            <div class="empty-state">
              <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8,5.14V19.14L19,12.14L8,5.14Z"/>
              </svg>
              <h4>No Media Found</h4>
              <p>Import media files to get started</p>
              <button class="btn-primary" (click)="openImportDialog()">Import Media</button>
            </div>
          </ng-template>
        </div>

        <!-- Effects Panel -->
        <div class="content-panel" *ngIf="activeTab === 'effects'">
          <div class="panel-header">
            <h3>Video Effects</h3>
          </div>
          <div class="effects-grid">
            <div 
              class="effect-item" 
              *ngFor="let effect of videoEffects; trackBy: trackByEffectId"
              cdkDrag
              [cdkDragData]="{ type: 'effect', effect: effect }"
              (click)="applyEffect(effect)"
            >
              <div class="effect-thumbnail">
                <img [src]="effect.thumbnail" [alt]="effect.name" />
                <div class="effect-overlay">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2Z"/>
                  </svg>
                </div>
              </div>
              <span class="effect-name">{{ effect.name }}</span>
            </div>
          </div>
        </div>

        <!-- Text & Titles -->
        <div class="content-panel" *ngIf="activeTab === 'text'">
          <div class="panel-header">
            <h3>Text & Titles</h3>
          </div>
          <div class="text-templates">
            <button 
              class="text-item" 
              *ngFor="let template of titleTemplates; trackBy: trackByTemplateId"
              (click)="addTextElement(template)"
            >
              <div class="text-preview">{{ template.preview }}</div>
              <span class="text-name">{{ template.name }}</span>
            </button>
          </div>
        </div>

        <!-- Audio Tools -->
        <div class="content-panel" *ngIf="activeTab === 'audio'">
          <div class="panel-header">
            <h3>Audio Tools</h3>
          </div>
          <div class="audio-tools">
            <button 
              class="tool-btn" 
              *ngFor="let tool of audioTools; trackBy: trackByToolType"
              (click)="openAudioTool(tool.type)"
            >
              <div class="tool-icon" [innerHTML]="tool.icon"></div>
              <span>{{ tool.name }}</span>
            </button>
          </div>
        </div>

        <!-- Captions -->
        <div class="content-panel" *ngIf="activeTab === 'captions'">
          <div class="panel-header">
            <h3>Captions & Subtitles</h3>
          </div>
          <div class="caption-tools">
            <button class="caption-btn ai-btn" (click)="generateAutoCaption()">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z"/>
              </svg>
              AI Auto-Caption
            </button>
            <button class="caption-btn" (click)="importSubtitles()">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
              </svg>
              Import SRT
            </button>
          </div>
        </div>
      </div>
    </aside>

    <!-- Central Preview Area -->
    <main class="preview-area">
      <div class="preview-container">
        <div class="video-preview">
          <video 
            *ngIf="selectedVideoForPreview; else videoPlaceholder" 
            [src]="selectedVideoForPreview" 
            #videoPlayer
            class="preview-video"
            (loadedmetadata)="onVideoLoaded($event)"
            (timeupdate)="onTimeUpdate($event)"
            (play)="isPlaying = true"
            (pause)="isPlaying = false"
            controls
          ></video>
          
          <ng-template #videoPlaceholder>
            <div class="video-placeholder">
              <svg width="80" height="80" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8,5.14V19.14L19,12.14L8,5.14Z"/>
              </svg>
              <h3>Drop media here to preview</h3>
              <p>Select a video from your media library</p>
            </div>
          </ng-template>
        </div>
      </div>
    </main>

    <!-- Right Inspector Panel -->
    <aside class="right-sidebar" [class.collapsed]="inspectorCollapsed">
      <div class="inspector-header">
        <h3>Inspector</h3>
        <button class="collapse-btn" (click)="toggleInspector()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
          </svg>
        </button>
      </div>

      <div class="inspector-content" *ngIf="!inspectorCollapsed">
        <div class="inspector-section" *ngIf="selectedClip">
          <h4>Clip Properties</h4>
          <div class="property-group">
            <label>Name</label>
            <input type="text" [(ngModel)]="selectedClip.name" class="property-input" />
          </div>
          <div class="property-group">
            <label>Duration</label>
            <input type="text" [value]="formatTime(selectedClip.duration)" class="property-input" readonly />
          </div>
        </div>

        <div class="inspector-section" *ngIf="selectedClip?.type === 'video'">
          <h4>Video Properties</h4>
          <div class="property-group">
            <label>Opacity</label>
            <div class="slider-group">
              <input type="range" min="0" max="100" [(ngModel)]="selectedClip.opacity" class="property-slider" />
              <span class="property-value">{{ selectedClip.opacity }}%</span>
            </div>
          </div>
          <div class="property-group">
            <label>Scale</label>
            <div class="slider-group">
              <input type="range" min="10" max="500" [(ngModel)]="selectedClip.scale" class="property-slider" />
              <span class="property-value">{{ selectedClip.scale }}%</span>
            </div>
          </div>
        </div>
      </div>
    </aside>
  </div>

  <!-- Timeline Section -->
  <section class="timeline-section">
    <div class="timeline-header">
      <div class="timeline-controls">
        <button class="timeline-btn" (click)="fitToWindow()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M9,9H15V15H9V9M11,11V13H13V11H11M2,3V21H4V19H6V21H8V3H6V5H4V3H2M16,3V21H18V19H20V21H22V3H20V5H18V3H16Z"/>
          </svg>
          Fit
        </button>
        
        <div class="timeline-zoom">
          <input 
            type="range" 
            min="25" 
            max="400" 
            [(ngModel)]="timelineZoom" 
            (input)="onTimelineZoomChange()" 
            class="zoom-slider"
          />
          <span>{{ timelineZoom }}%</span>
        </div>
      </div>
      
      <div class="time-ruler">
        <div 
          class="time-marker" 
          *ngFor="let marker of timeMarkers; trackBy: trackByMarkerTime"
          [style.left.%]="marker.position"
        >
          <span>{{ marker.time }}</span>
          <div class="marker-line"></div>
        </div>
      </div>
    </div>

    <div class="timeline-tracks">
      <!-- Video Tracks -->
      <div class="track-group">
        <div class="track-header">
          <span class="track-type">VIDEO</span>
        </div>
        <div class="tracks-container">
          <div 
            class="track video-track" 
            *ngFor="let trackIndex of videoTracks; trackBy: trackByIndex"
            cdkDropList
            [cdkDropListData]="{ type: 'video', index: trackIndex }"
            (cdkDropListDropped)="onClipDrop($event)"
          >
            <div class="track-controls">
              <button 
                class="track-btn mute-btn" 
                [class.active]="isTrackMuted('video', trackIndex)" 
                (click)="toggleTrackMute('video', trackIndex)"
              >
                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"/>
                </svg>
              </button>
            </div>
            
            <div class="track-content">
              <div 
                class="clip video-clip" 
                *ngFor="let clip of getClipsForTrack('video', trackIndex); trackBy: trackByClipId"
                [class.selected]="selectedClip?.id === clip.id"
                [style.left.px]="getClipPosition(clip)"
                [style.width.px]="getClipWidth(clip)"
                (click)="selectClip(clip)"
                cdkDrag
                [cdkDragData]="clip"
              >
                <div class="clip-content">
                  <div class="clip-thumbnail" *ngIf="clip.thumbnail">
                    <img [src]="clip.thumbnail" [alt]="clip.name" />
                  </div>
                  <div class="clip-info">
                    <span class="clip-name">{{ clip.name }}</span>
                    <span class="clip-duration">{{ formatTime(clip.duration) }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Audio Tracks -->
      <div class="track-group">
        <div class="track-header">
          <span class="track-type">AUDIO</span>
        </div>
        <div class="tracks-container">
          <div 
            class="track audio-track" 
            *ngFor="let trackIndex of audioTracks; trackBy: trackByIndex"
            cdkDropList
            [cdkDropListData]="{ type: 'audio', index: trackIndex }"
            (cdkDropListDropped)="onClipDrop($event)"
          >
            <div class="track-controls">
              <button 
                class="track-btn mute-btn" 
                [class.active]="isTrackMuted('audio', trackIndex)" 
                (click)="toggleTrackMute('audio', trackIndex)"
              >
                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M3,9V15H7L12,20V4L7,9H3M16.59,12L14,9.41L15.41,8L18,10.59L20.59,8L22,9.41L19.41,12L22,14.59L20.59,16L18,13.41L15.41,16L14,14.59L16.59,12Z"/>
                </svg>
              </button>
              <div class="volume-fader">
                <input 
                  type="range" 
                  min="0" 
                  max="100" 
                  [value]="getTrackVolume('audio', trackIndex)" 
                  (input)="setTrackVolume('audio', trackIndex, $event)" 
                  class="fader"
                />
              </div>
            </div>
            
            <div class="track-content">
              <div 
                class="clip audio-clip" 
                *ngFor="let clip of getClipsForTrack('audio', trackIndex); trackBy: trackByClipId"
                [class.selected]="selectedClip?.id === clip.id"
                [style.left.px]="getClipPosition(clip)"
                [style.width.px]="getClipWidth(clip)"
                (click)="selectClip(clip)"
                cdkDrag
                [cdkDragData]="clip"
              >
                <div class="clip-content">
                  <div class="waveform" *ngIf="clip.waveform">
                    <div 
                      class="waveform-bar" 
                      *ngFor="let bar of clip.waveform; trackBy: trackByIndex"
                      [style.height.%]="bar"
                    ></div>
                  </div>
                  <div class="clip-info">
                    <span class="clip-name">{{ clip.name }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Playhead -->
    <div class="playhead" [style.left.px]="getPlayheadPosition()">
      <div class="playhead-line"></div>
      <div class="playhead-handle" (mousedown)="startPlayheadDrag($event)"></div>
    </div>
  </section>

  <!-- Loading Overlay -->
  <div class="loading-overlay" *ngIf="isLoading">
    <div class="loading-spinner"></div>
    <p>{{ loadingMessage }}</p>
  </div>

  <!-- Toast Notifications -->
  <div class="toast-container">
    <div 
      class="toast" 
      *ngFor="let toast of toasts; trackBy: trackByToastId"
      [class]="'toast-' + toast.type"
      [@slideIn]
    >
      <div class="toast-content">
        <svg class="toast-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,16.5L18,9.5L16.5,8L11,13.5L7.5,10L6,11.5L11,16.5Z"/>
        </svg>
        <span>{{ toast.message }}</span>
      </div>
      <button class="toast-close" (click)="dismissToast(toast.id)">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
        </svg>
      </button>
    </div>
  </div>
</div>